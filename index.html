<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Moruk Tombala</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      background: #0d1117;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    #left-panel {
      width: 22%;
      background: #111827;
      padding: 10px;
      overflow-y: auto;
      box-sizing: border-box;
    }
    .mini-card {
      background: #1f2937;
      border: 1px solid #374151;
      margin: 5px 0;
      padding: 5px;
      font-size: 12px;
    }
    .mini-card table {
      border-collapse: collapse;
      margin: auto;
    }
    .mini-card td {
      border: 1px solid #374151;
      width: 18px;
      height: 18px;
      text-align: center;
      font-size: 11px;
    }
    #center-panel {
      width: 38%;
      padding: 10px;
      text-align: center;
      overflow-y: auto;
      box-sizing: border-box;
    }
    #balls {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
      margin: 10px 0;
    }
    .ball {
      background: #1f2937;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      line-height: 35px;
      text-align: center;
      cursor: pointer;
      user-select: none;
      transition: transform 0.15s ease, background 0.15s ease;
      font-size: 13px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .ball:hover {
      transform: scale(1.08);
    }
    .ball.active {
      background: #facc15;
      color: #000;
    }
    button {
      margin: 5px;
      padding: 8px 16px;
      background: #2563eb;
      border: none;
      color: #fff;
      cursor: pointer;
      border-radius: 5px;
      font-size: 14px;
      transition: background 0.15s ease, transform 0.15s ease;
    }
    button:hover {
      background: #1d4ed8;
      transform: translateY(-1px);
    }
    #right-panel {
      width: 40%;
      background: #111827;
      padding: 10px;
      overflow-y: auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      box-sizing: border-box;
    }
    .card {
      background: #1f2937;
      border: 2px solid #374151;
      border-radius: 8px;
      padding: 6px;
      text-align: center;
      box-sizing: border-box;
    }
    .card.highlight {
      border-color: #facc15;
      box-shadow: 0 0 10px #facc15;
    }
    .card table {
      border-collapse: collapse;
      margin: auto;
    }
    .card td {
      border: 1px solid #374151;
      width: 25px;
      height: 25px;
      text-align: center;
      font-size: 14px;
      background: #1f2937;
      color: #fff;
    }
    .card td.active {
      background: #facc15;
      color: #000;
    }
    #modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #modal-content {
      background: #1f2937;
      padding: 20px;
      border-radius: 8px;
      max-height: 80%;
      max-width: 90%;
      overflow-y: auto;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      box-sizing: border-box;
    }
    #modal-content h2 {
      margin: 0 0 10px 0;
      width: 100%;
      text-align: center;
      font-size: 18px;
    }
    #modal-content .card {
      width: 250px;
      flex-shrink: 0;
    }
    @media (max-width: 900px) {
      body {
        flex-direction: column;
        height: auto;
        overflow: auto;
      }
      #left-panel, #center-panel, #right-panel {
        width: 100%;
        height: auto;
      }
      #right-panel {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <div id="left-panel">
    <h3>Ã‡ekilen Toplar</h3>
    <div id="drawn-balls"></div>
    <h3>Kazanan Kartlar</h3>
    <div id="winners"></div>
  </div>

  <div id="center-panel">
    <h2>Moruk Tombala ðŸŽ‰</h2>
    <button onclick="drawBall()" id="draw-button">Top Ã‡ek</button>
    <button onclick="resetGame()">Yeniden BaÅŸlat</button>
    <div id="balls"></div>
    <p id="draw-count"></p>
  </div>

  <div id="right-panel"></div>

  <div id="modal" onclick="closeModal()">
    <div id="modal-content" onclick="event.stopPropagation()"></div>
  </div>

<script>
const totalBalls = 90;
let currentStage = 1; // 1: 1. Ã‡inko, 2: 2. Ã‡inko, 3: Tombala
let drawn = [];

// KartlarÄ±nÄ±zÄ±n tamamÄ±nÄ± buraya yapÄ±ÅŸtÄ±rÄ±n:
const cards = [
  // Ã–rnek kartlar (lÃ¼tfen kendi 150 kartÄ±nÄ±zÄ± buraya tam olarak yapÄ±ÅŸtÄ±rÄ±n)

{
  id: 1,
  rows: [
    [1, null, 23, null, 44, null, 61, null, 80],
    [null, 16, 26, null, null, 58, null, 74, 84],
    [null, null, 28, null, 49, 59, null, 71, 89]
  ]
},
{
  id: 2,
  rows: [
    [2, null, 24, 31, null, 51, null, 70, null],
    [null, 13, null, 39, 46, null, 67, 73, null],
    [7, 19, null, null, 48, 56, null, null, 87]
  ]
},
{
  id: 3,
  rows: [
    [3, null, 20, 33, null, null, null, 77, 83],
    [null, 10, null, 38, 41, null, 65, 79, null],
    [null, 18, 29, null, 45, 50, null, null, 86]
  ]
},
{
  id: 4,
  rows: [
    [4, 14, null, 32, null, null, 60, null, 82],
    [null, 17, 27, null, 49, 53, null, 74, null],
    [8, null, null, 37, null, null, 66, 78, 85, ]
  ]
},
{
  id: 5,
  rows: [
    [5, null, 21, null, 47, null, 62, null, 81],
    [null, 11, 25, 30, null, 52, null, 72, null],
    [null, 15, null, 35, null, 55, 63, 75, null]
  ]
},
{
  id: 6,
  rows: [
    [6, null, 22, null, 42, 54, null, 76, null],
    [null, 12, null, 34, null, 57, 64, null, 88],
    [9, null, 26, null, 43, null, 69, null, 90]
  ]
},
{
  id: 7,
  rows: [
    [4, null, null, 31, 40, null, 69, 74, null],
    [7, null, 23, 37, null, 53, null, 79, null],
    [null, 13, 25, null, 47, 58, null, null, 87]
  ]
},
{
  id: 8,
  rows: [
    [1, null, 22, null, null, null, 61, 72, 83],
    [null, 17, null, 33, 49, null, 67, 73, null],
    [8, 18, null, 35, null, 50, null, null, 85]
  ]
},
{
  id: 9,
  rows: [
    [2, null, 20, 36, null, null, null, 70, 84],
    [null, 16, null, null, 46, 51, null, 71, 86],
    [9, null, 27, 38, null, 56, 66, null, null]
  ]
},
{
  id: 10,
  rows: [
    [null, 10, 28, null, null, 52, 65, null, 80],
    [5, null, null, 32, 41, null, 68, null, 81],
    [null, 19, 29, null, 44, null, null, 78, 82]
  ]
},
{
  id: 11,
  rows: [
    [null, 11, 21, null, 45, null, 62, null, 88],
    [null, 14, null, 30, 48, 54, null, 77, null],
    [3, null, 24, null, null, 57, 63, null, 90]
  ]
},
{
  id: 12,
  rows: [
    [null, 12, null, 34, 42, 55, null, 75, null],
    [6, null, null, null, 43, 59, 60, null, 89],
    [null, 15, 26, 39, null, null, 64, 76, null]
  ]
},
{
  id: 13,
  rows: [
    [null, 10, null, 31, null, 54, 63, null, 82],
    [3, 19, null, null, 40, null, 67, 74, null],
    [null, null, 28, null, 45, 55, null, 75, 90]
  ]
},
{
  id: 14,
  rows: [
    [null, null, 20, 33, null, 56, 65, null, 85],
    [4, 12, null, 38, null, null, 68, 71, null],
    [9, null, 26, null, 47, 59, null, null, 88]
  ]
},
{
  id: 15,
  rows: [
    [null, null, 21, 30, null, 50, null, 73, 84],
    [5, 11, null, 34, 42, null, 61, null, null],
    [null, 18, null, 37, 43, null, 62, null, 89]
  ]
},
{
  id: 16,
  rows: [
    [null, null, 22, 36, null, 52, null, 76, 80],
    [2, 13, null, null, 41, null, 60, 77, null],
    [7, 17, 27, null, 46, null, null, null, 81]
  ]
},
{
  id: 17,
  rows: [
    [8, 15, null, 35, null, 57, null, 72, null],
    [null, 16, 29, null, 48, null, null, 78, 87],
    [null, null, 23, 32, null, 51, 64, null, 83]
  ]
},
{
  id: 18,
  rows: [
    [1, 14, null, 39, null, 58, null, 70, null],
    [null, null, 24, null, 44, 53, 66, null, 86],
    [6, null, 25, null, 49, null, 69, 79, null]
  ]
},
{
  id: 19,
  rows: [
    [null, 10, 25, null, 45, null, 62, 75, null],
    [7, null, null, 36, 47, null, 69, null, 84],
    [null, 13, null, 38, null, 57, null, 79, 89]
  ]
},
{
  id: 20,
  rows: [
    [1, null, null, 33, 49, null, 67, null, 81],
    [null, 14, 26, null, 48, null, 65, 77, null],
    [5, null, 28, 37, null, 59, null, 78, null]
  ]
},
{
  id: 21,
  rows: [
    [2, null, null, 32, null, 53, 61, null, 83],
    [null, 11, 21, null, 41, 50, null, null, 80],
    [9, 15, null, null, 46, 58, null, 74, null]
  ]
},
{
  id: 22,
  rows: [
    [3, null, 22, null, null, 54, 66, null, 88],
    [null, 16, null, 35, 42, null, 60, null, 87],
    [8, null, 29, null, 44, 56, null, 70, null]
  ]
},
{
  id: 23,
  rows: [
    [4, null, 24, 31, null, 55, null, 71, null],
    [null, 17, 20, null, 43, null, 64, null, 85],
    [6, 19, null, 34, null, null, null, 73, 90]
  ]
},
{
  id: 24,
  rows: [
    [null, 12, 23, null, null, 51, null, 72, 82],
    [null, 18, null, 30, 40, null, 63, 76, null],
    [null, null, 27, 39, null, 52, 68, null, 86]
  ]
},
{
  id: 25,
  rows: [
    [null, null, 22, null, 40, 56, null, 70, 80],
    [8, 11, null, 38, null, null, 68, null, 83],
    [null, 15, 25, 39, null, 59, null, 79, null]
  ]
},
{
  id: 26,
  rows: [
    [5, null, 26, null, null, 55, null, 77, 84],
    [null, null, 23, null, 48, null, 62, 75, 82],
    [null, null, null, 33, null, 57, 65, 78, 89]
  ]
},
{
  id: 27,
  rows: [
    [1, 16, null, 34, 49, null, 69, null, null],
    [6, 19, 27, null, null, 54, null, 75, null],
    [null, null, 24, null, 44, 51, 60, null, 85]
  ]
},
{
  id: 28,
  rows: [
    [null, null, 21, 31, null, null, 63, 74, 81],
    [2, 10, 28, 35, null, 58, null, null, null],
    [7, 12, null, 36, null, null, 64, null, 86]
  ]
},
{
  id: 29,
  rows: [
    [3, 13, 29, null, 43, null, 67, null, null],
    [null, null, 20, null, 41, null, 61, 71, 90],
    [9, 17, null, 32, 45, null, null, 72, null]
  ]
},
{
  id: 30,
  rows: [
    [null, null, null, 30, 42,  50, null, 73, 87],
    [4, 14, null, 37, 46, 52, null, null, null],
    [null, 18, null, null, 47, 53, 66, null, 88]
  ]
},
{
  id: 31,
  rows: [
    [null, null, null, 30, 42, null, 64, 71, 81],
    [6, 16, 24, null, 47, null, 66, null, null],
    [null, 19, null, 31, null, 57, null, 76, 90]
  ]
},
{
  id: 32,
  rows: [
    [null, null, null, 32, null, 50, 60, 74, 84],
    [1, null, 20, null, 43, 51, null, null, 86],
    [9, null, 27, null, 45, 53, 61, null, null]
  ]
},
{
  id: 33,
  rows: [
    [null, null, null, 33, 46, null, 62, 78, 80],
    [3, 11, 22, null, null, 58, 68, null, null],
    [null, 15, 25, 37, null, null, null, 79, 88]
  ]
},
{
  id: 34,
  rows: [
    [4, 10, 21, null, null, 59, null, null, 83],
    [null, null, null, 34, 40, 56, 63, 77, null],
    [7, 12, 26, 39, null, null, 65, null, null]
  ]
},
{
  id: 35,
  rows: [
    [2, 13, 28, null, 48, null, null, 73, null],
    [5, 17, null, 38, null, 55, null, null, 87],
    [null, null, null, 35, 41, 54, null, 72, 82]
  ]
},
{
  id: 36,
  rows: [
    [null, null, null, 36, 44, null, 67, 70, 85],
    [8, 14, 23, null, 49, null, null, null, 89],
    [null, 18, 29, null, null, 52, 69, 75, null]
  ]
},
{
  id: 37,
  rows: [
    [null, null, null, 33, 46, null, 61, 72, 83],
    [1, 14, 22, null, 49, null, null, 73, null],
    [5, null, 26, 37, null, 59, 65, null, null]
  ]
},
{
  id: 38,
  rows: [
    [null, null, null, 32, 45, null, 62, 75, 84],
    [null, 13, 25, null, 47, 57, 69, null, null],
    [7, 16, null, 38, null, null, null, 78, 89]
  ]
},
{
  id: 39,
  rows: [
    [null, null, null, 36, null, 50, 63, 74, 82],
    [null, 12, 23, 39, null, null, 68, 76, null],
    [9, 18, 24, null, null, 51, null, null, 86]
  ]
},
{
  id: 40,
  rows: [
    [null, null, null, null, 40, 52, 67, 78, 80],
    [null, 11, 21, 30, 44, 53, null, null, null],
    [2, 17, 29, null, 48, null, null, null, 81]
  ]
},
{
  id: 41,
  rows: [
    [null, null, null, null, 41, 54, 60, 71, 90],
    [3, 19, null, 31, 43, null, 66, null, null],
    [8, null, 20, 35, null, 58, null, 77, null]
  ]
},
{
  id: 42,
  rows: [
    [4, 15, 27, 34, null, null, null, null, 87],
    [null, null, null, null, 42, 55, 64, 70, 85],
    [6, 19, 28, null, null, 56, null, null, 88]
  ]
},
{
  id: 43,
  rows: [
    [5, 18, null, 37, 43, null, null, 72, null],
    [null, 15, 27, 34, null, null, 61, null, 89],
    [null, null, null, null, 42, 52, 60, 70, 84]
  ]
},
{
  id: 44,
  rows: [
    [null, null, null, null, 44, 56, 68, 73, 88],
    [1, 12, 25, null, 49, null, 69, null, null],
    [6, null, 26, 35, null, 59, null, 74, null]
  ]
},
{
  id: 45,
  rows: [
    [null, null, null, null, 40, 50, 63, 75, 83],
    [3, 16, null, 30, null, null, 67, null, 87],
    [null, 17, 24, null, 45, 57, null, 76, null]
  ]
},
{
  id: 46,
  rows: [
    [null, null, null, null, 46, 58, 62, 78, 80],
    [2, 11, 21, 32, null, null, null, 79, null],
    [7, 13, 28, 36, null, null, null, null, 81]
  ]
},
{
  id: 47,
  rows: [
    [null, null, null, null, 47, 53, 64, 71, 85],
    [4, null, 20, 33, null, null, 65, null, 86],
    [9, 14, 22, 38, null, 54, null, null, null]
  ]
},
{
  id: 48,
  rows: [
    [null, null, null, null, 41, 51, 66, 77, 82],
    [null, 10, 23, 31, 48, 55, null, null, null],
    [8, 19, 29, 39, null, null, null, null, 90]
  ]
},
{
  id: 49,
  rows: [
    [6, 13, null, 33, null, 52, null, 72, null],
    [null, 18, 22, null, 46, null, 65, null, 81],
    [8, null, 29, 37, null, 57, null, 76, null]
  ]
},
{
  id: 50,
  rows: [
    [2, null, 23, null, 45, null, 64, 71, null],
    [null, 18, null, 32, null, 58, null, 78, 80],
    [5, null, 25, null, 49, null, 69, null, 86]
  ]
},
{
  id: 51,
  rows: [
    [1, null, 25, null, 40, null, 61,  75, null],
    [null, 11, null, 31, null, 59, null, 78, 85],
    [3, null, 26, null, 42, null, 64, null, 88]
  ]
},
{
  id: 52,
  rows: [
    [8, 10, null, 36, null, 50, null, 71, null],
    [null, 15, 26, null, 40, null, 60, null, 83],
    [2, null, 21, 39, null, 56, null, 74, null]
  ]
},
{
  id: 53,
  rows: [
    [2, null, 23, null, 43, null, 60, 74, null],
    [null, 12, null, 32, null, 53, null, 79, 80],
    [5, null, 20, null, 49, null, 69, null, 84]
  ]
},
{
  id: 54,
  rows: [
    [6, null, 25, null, 42, null, 67, 75, null],
    [null, 17, null, 38, null, 55, null, 70, 81],
    [1, null, 21, null, 44, null, 66, null, 83]
  ]
},
{
  id: 55,
  rows: [
    [8, null, 27, null, 48, null, 66, 77, null],
    [null, 16, null, 36, null, 57, null, 78, 88],
    [3, null, 28, null, 47, null, 68, null, 87]
  ]
},
{
  id: 56,
  rows: [
    [3, null, 22, null, 45, null, 60, 72, null],
    [6, null, 29, null, 48, null, 66, null, 86],
    [null, 18, null, 38, null, 51, null, 78, 81]
  ]
},
{
  id: 57,
  rows: [
    [2, 13, null, 36, null, 58, null, 74, null],
    [null, 19, 22, null, 47, null, 67, null, 89],
    [8, null, 27, 38, null, 52, null, 79, null]
  ]
},
{
  id: 58,
  rows: [
    [3, null, 22, null, 42, null, 65, 72, null],
    [null, 13, null, 31, null, 52, null, 79, 83],
    [6, null, 27, null, 47, null, 61, null, 90]
  ]
},
{
  id: 59,
  rows: [
    [3, 12, null, 30, null, 53, null, 73, null],
    [null, 16, 21, null, 41, null, 61, null, 87],
    [9, null, 24, 35, null, 57, null, 70, null]
  ]
},
{
  id: 60,
  rows: [
    [3, null, 20, null, 43, null, 60, 71, null],
    [null, 13, null, 33, null, 55, null, 79, 81],
    [7, null, 25, null, 49, null, 68, null, 88]
  ]
},
{
  id: 61,
  rows: [
    [7, null, 26, null, 46, null, 63, 72, null],
    [null, 15, null, 34, null, 56, null, 76, 89],
    [5, null, 22, null, 48, null, 62, null, 86]
  ]
},
{
  id: 62,
  rows: [
    [4, null, 26, null, 41, null, 63, 73, null],
    [null, 14, null, 34, null, 59, null, 77, 80],
    [7, null, 29, null, 43, null, 68, null, 85]
  ]
},
{
  id: 63,
  rows: [
    [9, 12, null, 34, null, 59, null, 73, null],
    [null, 19, 24, null, 44, null, 66, null, 84],
    [7, null, 26, 35, null, 54, null, 70, null]
  ]
},
{
  id: 64,
  rows: [
    [5, null, 21, null, 40, null, 68, 71, null],
    [null, 10, null, 30, null, 51, null, 77, 89],
    [9, null, 24, null, 41, null, 65, null, 82]
  ]
},
{
  id: 65,
  rows: [
    [4, 14, null, 32, null, 55, null, 71, null],
    [null, 17, 29, null, 42, null, 64, null, 86],
    [9, null, 25, 38, null, 58, null, 76, null]
  ]
},
{
  id: 66,
  rows: [
    [6, 11, null, 35, null, 50, null, 72, null],
    [null, 15, 27, null, 44, null, 63, null,  82],
    [8, null, 28, 37, null, 59, null, 77, null]
  ]
},
{
  id: 67,
  rows: [
    [1, null, 20, null, 40, null, 64, 76, null],
    [null, 10, null, 30, null, 56, null, 79, 88],
    [2, null, 23, null, 46, null, 68, null, 87]
  ]
},
{
  id: 68,
  rows: [
    [4, null, 25, null, 41, null, 62, 75, null],
    [null, 11, null, 33, null, 52, null, 77, 82],
    [8, null, 28, null, 47, null, 67, null, 89]
  ]
},
{
  id: 69,
  rows: [
    [1, null, 21, null, 45, null, 62, 70, null],
    [null, 17, null, 39, null, 50, null, 73, 81],
    [4, null, 28, null, 48, null, 65, null, 90]
  ]
},
{
  id: 70,
  rows: [
    [1, 11, null, 39, null, 51, null, 78, null],
    [null, 18, 20, null, 43, null, 63, null, 88],
    [7, null, 28, 31, null, 55, null, 75, null]
  ]
},
{
  id: 71,
  rows: [
    [1, 11, null, null, null, 56, 61, 71, null],
    [3, null, 23, 33, null, 58, null, null, 81],
    [null, 14, null, 36, 40, null, null, 79, 86]
  ]
},
{
  id: 72,
  rows: [
    [2, 12, null, null, 43, 57, null, 70, null],
    [4, null, null, 35, null, 59, 67, null, 82],
    [null, 15, 26, 37, null, null, null, 72, 87]
  ]
},
{
  id: 73,
  rows: [
    [null, null, 22, 34, 42, null, 60, 71, null],
    [3, null, 25, null, null, 50, 66, null, 81],
    [5, 13, null, null, 44, 58, null, 76, null]
  ]
},
{
  id: 74,
  rows: [
    [null, 16, 24, null, 43, null, 63, 73, null],
    [4, null, 27, 38, null, 51, 68, null, null],
    [6, null, null, null, 45, 59, null, 78, 82]
  ]
},
{
  id: 75,
  rows: [
    [1, 14, null, 36, 44, null, null, null, 83],
    [null, null, 27, 38, null, 50, 64, null, 88],
    [null, 17, 28, null, 46, null, 69, 72, null]
  ]
},
{
  id: 76,
  rows: [
    [null, 15, null, 30, null, 45, null, 77, 84],
    [2, null, 26, null, 37, null, 60, null, 89],
    [null, 18, null, 29, null, 47, null, 52, 65, null]
  ]
},
{
  id: 77,
  rows: [
    [5, null, 16, null, null, null, 51, null, 62, 74],
    [7, null, 27, null, 31, null, 56, null, null, 80],
    [null, 19, null, 38, null, 47, null, null, 79, 81]
  ]
},
{
  id: 78,
  rows: [
    [6, 10, null, null, 48, null, 52, null, 70],
    [8, null, null, 32, null, 57, null, 64, 86],
    [null, 17, null, 20, null, 39, null, null, 75, 90]
  ]
},
{
  id: 79,
  rows: [
    [null, null, 22, null, 33, null, 46, null, 61, 71],
    [7, null, 27, null, null, 53, null, 65, 83],
    [9, 11, null, null, 49, null, 58, null, 73]
  ]
},
{
  id: 80,
  rows: [
    [null, 19, null, 22, null, 40, null, 63, 72],
    [2, null, 29, null, 31, null, 54, null, 66],
    [8, null, null, 48, null, 55, null, 75, 84]
  ]
},
{
  id: 81,
  rows: [
    [3, null, 12, null, 30, null, 41, null, 81],
    [null, null, 20, null, 32, null, 51, null, 64, 87],
    [null, 19, null, 23, null, 49, null, 67, 74]
  ]
},
{
  id: 82,
  rows: [
    [null, 10, null, 32, null, 41, null, 76, 82],
    [4, null, 21, null, 34, null, 66, null, 88],
    [null, 13, null, 23, null, 42, null, 54, 68, null]
  ]
},
{
  id: 83,
  rows: [
    [1, null, 18, null, null, null, 50, null, 65, 74],
    [9, null, 21, null, 33, null, 55, null, 83],
    [null, 16, null, 35, null, 41, null, 77, null, 89]
  ]
},
{
  id: 84,
  rows: [
    [1, null, 17, null, null, 46, null, 52, null, 75],
    [4, null, null, 34, null, 55, null, 69, null, 80],
    [null, 19, null, 24, null, 35, null, null, 78, 84]
  ]
},
{
  id: 85,
  rows: [
    [null, null, 23, null, 36, null, 42, null, 62, 76],
    [2, null, 25, null, null, 53, null, 67, null, 85],
    [5, null, 18, null, null, 47, null, 56, null, 79]
  ]
},
{
  id: 86,
  rows: [
    [null, 10, null, 24, null, 43, null, 61, 70],
    [3, null, 26, null, 37, null, 54, null, 68],
    [6, null, null, 48, null, 57, null, 77, 86]
  ]
},
{
  id: 87,
  rows: [
    [5, null, 11, null, 36, null, 44, null, 85],
    [null, null, 25, null, 38, null, 55, null, 62, 90],
    [null, 18, null, 27, null, 49, null, 69, null, 71]
  ]
},
{
  id: 88,
  rows: [
    [null, 10, null, 37, null, 40, null, 79, 82],
    [6, null, 26, null, 39, null, 60, null, 89],
    [null, 12, null, 28, null, 45, null, 58, 63, null]
  ]
},
{
  id: 89,
  rows: [
    [4, null, 14, null, null, null, 50, null, 61, 72],
    [7, null, 25, null, 30, null, 59, null, 84],
    [null, 16, null, 38, null, 42, null, 78, null, 90]
  ]
},
{
  id: 90,
  rows: [
    [5, null, 13, null, null, 45, null, 50, null, 70],
    [8, null, null, 31, null, 57, null, 63, 81],
    [null, 15, null, 29, null, 39, null, null, 73, 85]
  ]
},
{
  id: 91,
  rows: [
    [null, null, 20, null, 32, null, 41, null, 62, 71],
    [6, null, 28, null, null, 51, null, 64, 87],
    [9, null, 12, null, null, 46, null, 58, null, 72]
  ]
},
{
  id: 92,
  rows: [
    [null, 14, null, 21, null, 43, null, 63, 73],
    [2, null, 29, null, 30, null, 52, null, 65],
    [7, null, null, 46, null, 59, null, 74, 88]
  ]
},
{
  id: 93,
  rows: [
    [7, null, 11, null, 31, null, 44, null, 82],
    [null, null, 22, null, 36, null, 56, null, 64, 86],
    [null, 13, null, 20, null, 47, null, 66, null, 73]
  ]
},
{
  id: 94,
  rows: [
    [null, 12, null, 32, null, 45, null, 75, 83],
    [8, null, 21, null, 37, null, 65, null, 87],
    [null, 17, null, 26, null, 48, null, 53, 67, null]
  ]
},
{
  id: 95,
  rows: [
    [1, null, 10, null, null, null, 51, null, 66, 74],
    [8, null, 22, null, 33, null, 53, null, 84],
    [null, 15, null, 38, null, 44, null, 76, null, 88]
  ]
},
{
  id: 96,
  rows: [
    [2, null, 14, null, null, 49, null, 52, null, 75],
    [9, null, null, 30, null, 54, null, 68, null, 85],
    [null, 19, null, 28, null, 34, null, null, 77, 89]
  ]
},
{
  id: 97,
  rows: [
    [1, null, 28, null, null, 53, null, 69, null, 87],
    [null, null, 23, null, 35, null, 40, null, 67, 76],
    [6, null, 15, null, null, 47, null, 55, null, 78]
  ]
},
{
  id: 98,
  rows: [
    [null, 17, null, 24, null, 41, null, 60, 77],
    [2, null, 29, null, 39, null, 54, null, 68],
    [7, null, null, 48, null, 56, null, 79, 80]
  ]
},
{
  id: 99,
  rows: [
    [9, null, 11, null, 31, null, 42, null, 80],
    [null, null, 20, null, 34, null, 59, null, 61, 86],
    [null, 16, null, 25, null, 49, null, 69, null, 78]
  ]
},
{
  id: 100,
  rows: [
    [null, 13, null, 32, null, 40, null, 70, 87],
    [3, null, 21, null, 35, null, 60, null, 90],
    [null, 18, null, 24, null, 43, null, 57, 62, null]
  ]
},
{
  id: 101,
  rows: [
    [1, null, 14, null, 38, null, 44, null, 83],
    [null, null, 20, null, 39, null, 51, null, 64, 88],
    [null, 17, null, 28, null, 48, null, 69, 72, null]
  ]
},
{
  id: 102,
  rows: [
    [null, 18, null, 24, null, 43, null, 63, 73],
    [4, null, 27, null, 38, null, 50, null, 68],
    [6, null, null, 46, null, 59, null, 78, 82]
  ]
},
{
  id: 103,
  rows: [
    [null, null, 22, null, 34, null, 42, null, 60, 70],
    [3, null, 25, null, null, 56, null, 66, 81],
    [5, null, 18, null, null, 44, null, 58, null, 76]
  ]
},
{
  id: 104,
  rows: [
    [2, 12, null, null, 48, null, 57, null, 70],
    [4, null, null, 36, null, 59, null, 67, 82],
    [null, 16, null, 26, null, 37, null, null, 72, 87]
  ]
},
{
  id: 105,
  rows: [
    [1, 11, null, null, null, 56, null, 60, 71],
    [3, null, 28, null, 33, null, 58, null, 81],
    [null, 14, null, 38, null, 40, null, 79, 86]
  ]
},
{
  id: 106,
  rows: [
    [null, null, 34, null, 42, null, 55, null, 67, 79],
    [null, null, 25, null, 38, null, 59, null, 68, 84],
    [null, null, 39, null, 46, null, 69, null, 77, 87]
  ]
},
{
  id: 107,
  rows: [
    [1, null, 20, null, 32, null, 46, null, 65],
    [7, null, 13, null, 25, null, 38, null, 47],
    [9, null, 17, null, 28, null, 49, null, 67]
  ]
},
{
  id: 108,
  rows: [
    [6, null, 28, null, 41, null, 66, null, 83],
    [null, 10, null, 38, null, 44, null, 52, 77],
    [7, null, 29, null, 48, null, 69, null, 88]
  ]
},
{
  id: 109,
  rows: [
    [null, 12, null, 36, null, 56, null, 71, 84],
    [null, 19, null, 38, null, 58, null, 75, 86],
    [null, 18, null, 39, null, 59, null, 78, 90]
  ]
},
{
  id: 110,
  rows: [
    [null, null, null, 40, null, 51, null, 65, 73, 81],
    [5, null, 14, null, 23, null, 46, null, 57],
    [null, 29, null, 37, null, 49, null, 58, null, 67]
  ]
},
{
  id: 111,
  rows: [
    [null, null, null, 40, null, 54, null, 61, 70, 80],
    [null, 14, null, 37, null, 41, null, 63, null, 82],
    [8, null, 19, null, 26, null, 48, null, 57]
  ]
},
{
  id: 112,
  rows: [
    [null, null, 23, null, 46, null, 52, null, 64, 86],
    [5, null, 15, null, 31, null, 47, null, 66],
    [3, null, 17, null, 28, null, 55, null, 71]
  ]
},
{
  id: 113,
  rows: [
    [null, null, 21, null, 45, null, 57, null, 65, 88],
    [4, null, 13, null, 30, null, 46, null, 67],
    [1, null, 16, null, 25, null, 59, null, 74]
  ]
},
{
  id: 114,
  rows: [
    [null, 10, null, 20, null, 31, null, 41, null, 50],
    [null, 11, null, 33, null, 48, null, null, 74, 81],
    [null, 12, null, 23, null, null, 51, null, 77, 90]
  ]
},
{
  id: 115,
  rows: [
    [1, null, 18, null, 37, null, null, 62, null, 70],
    [null, null, 24, null, 39, null, null, 65, 73, 87],
    [7, null, 29, null, null, null, 69, null, 79, 88]
  ]
},
{
  id: 116,
  rows: [
    [null, null, 41, null, 56, null, 62, null, 71, 83],
    [null, null, 21, null, 35, null, 43, null, 59, 67],
    [7, null, 17, null, 27, null, 36, null, 46]
  ]
},
{
  id: 117,
  rows: [
    [1, null, 14, null, 20, null, null, 60, null, 80],
    [2, null, 26, null, null, 54, null, 75, null, 82],
    [3, null, 15, null, null, 56, null, 66, null, 78]
  ]
},
{
  id: 118,
  rows: [
    [null, 10, null, 22, null, 34, null, 50, null, 70],
    [3, null, 26, null, 42, null, 54, null, 62],
    [4, null, 14, null, null, 38, null, 46, null, 66]
  ]
},
{
  id: 119,
  rows: [
    [4, null, 13, null, 21, null, 42, null, 60],
    [6, null, 16, null, 30, null, 51, null, 74],
    [7, null, 24, null, 45, null, 63, null, 88]
  ]
},
{
  id: 120,
  rows: [
    [null, 10, null, 20, null, 40, null, 60, null, 80],
    [1, null, 15, null, 35, null, 55, null, 70],
    [5, null, 25, null, 45, null, 65, null, 80]
  ]
},
{
  id: 121,
  rows: [
    [null, 11, null, 32, null, 51, null, 70, 80],
    [null, null, 21, null, 34, null, 42, null, 72, 84],
    [null, 13, null, null, 47, null, 59, null, 74, 86]
  ]
},
{
  id: 122,
  rows: [
    [4, null, null, 32, null, 50, null, 76, 82],
    [7, null, null, 44, null, 56, null, 78, 86],
    [9, null, null, 38, null, null, 64, null, 79, 90]
  ]
},
{
  id: 123,
  rows: [
    [null, 13, null, 31, null, 53, null, 71, 82],
    [null, 17, null, 23, null, 40, null, 67, 75],
    [null, 19, null, 27, null, 34, null, 79, 87]
  ]
},
{
  id: 124,
  rows: [
    [7, null, null, 33, null, 46, null, 52, null, 89],
    [8, null, 22, null, 48, null, 60, null, 90],
    [null, null, 23, null, 39, null, 56, null, 66, 77]
  ]
},
{
  id: 125,
  rows: [
    [null, 12, null, 34, null, 54, null, 61, 77],
    [3, null, 24, null, 41, null, 57, null, 78],
    [null, 18, null, 37, null, 48, null, 69, 90]
  ]
},
{
  id: 126,
  rows: [
    [9, null, 27, null, 45, null, 53, null, 71],
    [null, 15, null, 30, null, 55, null, 60, 86],
    [null, null, 36, null, 49, null, 66, null, 78, 88]
  ]
},
{
  id: 127,
  rows: [
    [3, null, 21, null, 44, null, 53, null, 73],
    [null, 13, null, 27, null, null, 59, null, 60, 86],
    [9, null, 19, null, null, 49, null, 66, null, 89]
  ]
},
{
  id: 128,
  rows: [
    [4, null, 24, null, 33, null, 53, null, 73],
    [null, 15, null, 29, null, 46, null, 60, 86],
    [9, null, 19, null, 38, null, 57, null, 66]
  ]
},
{
  id: 129,
  rows: [
    [null, 12, null, 34, null, 58, null, 72, 88],
    [7, null, 18, null, 20, null, 41, null, 64],
    [null, null, 37, null, 49, null, 67, null, 77, 90]
  ]
},
{
  id: 130,
  rows: [
    [null, 12, null, 34, null, 52, null, 76, 82],
    [1, null, 17, null, 27, null, 45, null, 66],
    [8, null, null, 36, null, 59, null, 69, null, 89]
  ]
},
{
  id: 131,
  rows: [
    [3, 11, null, null, 40, null, 51, null, 75],
    [null, null, 20, null, 34, null, 43, null, 61, 79],
    [6, null, 25, null, 37, null, 57, null, 90]
  ]
},
{
  id: 132,
  rows: [
    [4, null, 13, null, null, 42, null, 52, null, 73],
    [null, null, 21, null, 31, null, 44, null, 65, 79],
    [6, null, 25, 36, null, 57, null, null, 84]
  ]
},
{
  id: 133,
  rows: [
    [null, 14, null, 33, null, 40, null, 54, null, 71],
    [3, null, 16, null, 23, null, null, 63, null, 75],
    [9, null, null, 37, null, 43, null, 67, null, 82]
  ]
},
{
  id: 134,
  rows: [
    [4, null, 12, null, 39, null, 51, null, 75],
    [null, 19, null, 27, null, null, 59, null, 61, 77],
    [9, null, 28, null, 48, null, 64, null, 81]
  ]
},
{
  id: 135,
  rows: [
    [1, null, 13, null, 33, null, 54, null, 73],
    [null, 14, null, 21, null, null, 55, null, 61, 79],
    [7, null, 23, null, 47, null, 65, null, 85]
  ]
},
{
  id: 136,
  rows: [
    [null, 10, null, 32, null, 50, null, 71, 86],
    [3, null, 21, null, null, 55, null, 62, null, 73],
    [7, null, 29, null, 47, null, 60, null, 90]
  ]
},
{
  id: 137,
  rows: [
    [2, null, 22, null, 34, null, null, 70, 83],
    [null, 11, null, 24, null, 46, null, 53, null, 60],
    [9, null, 18, null, 38, null, null, 67, null, 88]
  ]
},
{
  id: 138,
  rows: [
    [5, null, 26, null, 35, null, null, 72, 84],
    [null, 10, null, 28, null, 41, null, 56, null, 64],
    [8, null, null, 39, null, 48, null, null, 76, 90]
  ]
},
{
  id: 139,
  rows: [
    [7, null, 20, null, 30, null, 41, null, 78],
    [null, 12, null, 38, null, 52, null, 61, null, 85],
    [9, null, 27, null, 49, null, 58, null, 65]
  ]
},
{
  id: 140,
  rows: [
    [null, 11, null, 31, null, 43, null, null, 78, 80],
    [3, null, 21, null, 34, null, null, 60, null, 89],
    [null, 13, null, 26, null, 48, null, 68, null, 79]
  ]
},
{
  id: 141,
  rows: [
    [1, null, 23, null, 32, null, 59, null, 74],
    [5, null, 15, null, 27, null, null, 60, null, 84],
    [null, 17, null, 38, null, 40, null, 65, null, 90]
  ]
},
{
  id: 142,
  rows: [
    [4, null, 14, null, 22, null, null, 58, null, 74],
    [null, 15, null, 35, null, 59, null, 61, null, 89],
    [null, 19, null, 37, null, 40, null, 64, null, 90]
  ]
},
{
  id: 143,
  rows: [
    [2, null, null, 30, null, 42, null, 51, null, 76],
    [null, 11, null, 25, null, 36, null, 57, null, 83],
    [null, 19, null, 28, null, 45, null, 63, null, 84]
  ]
},
{
  id: 144,
  rows: [
    [null, null, 22, null, 33, null, 56, null, 78, 81],
    [null, 11, null, null, 46, null, 58, null, 69, 85],
    [8, null, 27, null, 39, null, 49, null, 67]
  ]
},
{
  id: 145,
  rows: [
    [null, null, 23, null, 35, null, 58, null, 78, 83],
    [null, 18, null, null, 40, null, 59, null, 60, 90],
    [8, null, 24, null, 39, null, 48, null, 67]
  ]
},
{
  id: 146,
  rows: [
    [6, null, 23, null, 32, null, 53, null, 70],
    [null, 16, null, null, 47, null, 59, null, 60, 82],
    [null, null, 29, null, 39, null, null, 68, 77, 86]
  ]
},
{
  id: 147,
  rows: [
    [3, null, 20, null, 34, null, null, 60, 87],
    [null, 11, null, 27, null, 42, null, 64, null, 88],
    [9, null, 15, null, 39, null, 47, null, 79]
  ]
},
{
  id: 148,
  rows: [
    [4, null, 29, null, null, 50, 68, null, 81],
    [null, 10, null, 31, 44, null, null, 72, 88],
    [null, 17, null, 39, 48, 55, null, 79, null]
  ]
},
{
  id: 149,
  rows: [
    [1, null, 21, null, null, 52, null, 60, null, 80],
    [6, null, 12, null, null, 41, null, 67, null, 70],
    [null, null, 25, null, 30, null, 59, null, 77, 90]
  ]
},
{
  id: 150,
  rows: [
    [8, null, 22, null, 40, null, 66, null, 82],
    [null, 13, null, 35, null, 46, null, 67, 74],
    [null, null, 26, null, 37, null, 51, null, 69, 87]
  ]
  },
  // ... diÄŸer kartlarÄ±nÄ±z
];

// Kart baÅŸÄ±na kazanÄ±lan aÅŸamalarÄ± tutmak iÃ§in:
cards.forEach(card => card.wins = []); // BaÅŸlangÄ±Ã§ta boÅŸ dizi

function renderCard(card) {
  let html = `<div class="card" id="card-${card.id}"><div>Kart #${card.id}</div><table>`;
  card.rows.forEach(r => {
    html += "<tr>";
    r.forEach(c => {
      if (c) html += `<td id="card-${card.id}-${c}">${c}</td>`;
      else html += "<td></td>";
    });
    html += "</tr>";
  });
  html += "</table></div>";
  return html;
}

function renderMiniCard(card, status) {
  let mini = `<div class="mini-card"><div>Kart #${card.id} â†’ ${status}</div><table>`;
  card.rows.forEach(r => {
    mini += "<tr>";
    r.forEach(c => {
      if (c) {
        let active = drawn.includes(c) ? ' style="background:#facc15;color:#000;"' : "";
        mini += `<td${active}>${c}</td>`;
      } else {
        mini += "<td></td>";
      }
    });
    mini += "</tr>";
  });
  mini += "</table></div>";
  return mini;
}

function init() {
  drawn = [];
  currentStage = 1;
  document.getElementById("balls").innerHTML = "";
  document.getElementById("right-panel").innerHTML = "";
  document.getElementById("drawn-balls").innerHTML = "";
  document.getElementById("winners").innerHTML = "";

  for (let i = 1; i <= totalBalls; i++) {
    document.getElementById("balls").innerHTML += `<div class="ball" id="ball-${i}" onclick="toggleBall(${i})">${i}</div>`;
  }

  cards.forEach(c => {
    c.wins = []; // Kazanma aÅŸamalarÄ±nÄ± sÄ±fÄ±rla
    document.getElementById("right-panel").innerHTML += renderCard(c);
  });

  updateCount();
  updateLeftPanelWinners();
  enableBalls();
}

init();

function drawBall() {
  if (drawn.length >= totalBalls) return;
  let n;
  do {
    n = Math.floor(Math.random() * totalBalls) + 1;
  } while (drawn.includes(n));
  toggleBall(n);
}

function toggleBall(n) {
  if (drawn.includes(n)) {
    drawn = drawn.filter(x => x !== n);
  } else {
    drawn.push(n);
  }
  updateBalls();
  checkCards();
}

function updateBalls() {
  for (let i = 1; i <= totalBalls; i++) {
    const el = document.getElementById("ball-" + i);
    if (el) el.classList.remove("active");
  }
  drawn.forEach(n => {
    const el = document.getElementById("ball-" + n);
    if (el) el.classList.add("active");
  });
  document.getElementById("drawn-balls").innerText = drawn.slice().sort((a, b) => a - b).join(", ");
  updateCount();
}

function updateCount() {
  document.getElementById("draw-count").innerText = `Ã‡ekilen: ${drawn.length}/${totalBalls}`;
}

function checkCards() {
  let newWinners = [];

  if (currentStage === 1) {
    cards.forEach(card => {
      if (!card.wins.includes("1. Ã‡inko")) {
        for (let rowIndex = 0; rowIndex < 3; rowIndex++) {
          const row = card.rows[rowIndex];
          if (row.every(n => n === null || drawn.includes(n))) {
            card.wins.push("1. Ã‡inko");
            newWinners.push({ card, status: "1. Ã‡inko" });
            break;
          }
        }
      }
    });
    if (newWinners.length > 0) {
      currentStage = 2;
      showWinners(newWinners);
      return;
    }
  }

  if (currentStage === 2) {
    cards.forEach(card => {
      if (!card.wins.includes("2. Ã‡inko")) {
        let completedRowsCount = 0;
        card.rows.forEach(row => {
          if (row.every(n => n === null || drawn.includes(n))) {
            completedRowsCount++;
          }
        });
        if (completedRowsCount >= 2) {
          card.wins.push("2. Ã‡inko");
          newWinners.push({ card, status: "2. Ã‡inko" });
        }
      }
    });
    if (newWinners.length > 0) {
      currentStage = 3;
      showWinners(newWinners);
      return;
    }
  }

  if (currentStage === 3) {
    cards.forEach(card => {
      if (!card.wins.includes("Tombala")) {
        if (card.rows.every(row => row.every(n => n === null || drawn.includes(n)))) {
          card.wins.push("Tombala");
          newWinners.push({ card, status: "Tombala" });
        }
      }
    });
    if (newWinners.length > 0) {
      showWinners(newWinners);
      disableBalls();
      return;
    }
  }

  highlightCards();
  updateLeftPanelWinners();
}

function showWinners(winnersArray) {
  updateLeftPanelWinners();
  displayWinnersModal(winnersArray);
  highlightCards();
}

function highlightCards() {
  cards.forEach(card => {
    const el = document.getElementById("card-" + card.id);
    if (!el) return;
    if (card.wins.length > 0) el.classList.add("highlight");
    else el.classList.remove("highlight");

    card.rows.flat().forEach(n => {
      const td = document.getElementById(`card-${card.id}-${n}`);
      if (!td) return;
      if (drawn.includes(n)) td.classList.add("active");
      else td.classList.remove("active");
    });
  });
}

function updateLeftPanelWinners() {
  const winnersDiv = document.getElementById("winners");
  winnersDiv.innerHTML = "";

  const stages = ["1. Ã‡inko", "2. Ã‡inko", "Tombala"];
  stages.forEach(stage => {
    const winners = cards.filter(c => c.wins.includes(stage));
    if (winners.length > 0) {
      winnersDiv.innerHTML += `<h4>${stage}:</h4>`;
      winners.forEach(card => {
        winnersDiv.innerHTML += renderMiniCard(card, stage);
      });
    }
  });
}

function displayWinnersModal(winnersArray) {
  let modalContentHtml = "";
  winnersArray.forEach(winner => {
    modalContentHtml += `
      <div style="width: 100%; text-align: center;"><h2>${winner.status} - Kart #${winner.card.id}</h2></div>
      ${renderCard(winner.card)}
    `;
  });

  const modalContent = document.getElementById("modal-content");
  modalContent.innerHTML = modalContentHtml;
  document.getElementById("modal").style.display = "flex";

  setTimeout(() => {
    winnersArray.forEach(winner => {
      winner.card.rows.flat().forEach(n => {
        const tdList = document.querySelectorAll(`#modal-content #card-${winner.card.id}-${n}`);
        tdList.forEach(td => {
          if (drawn.includes(n)) td.classList.add("active");
          else td.classList.remove("active");
        });
      });
    });
  }, 20);
}

function closeModal() {
  document.getElementById("modal").style.display = "none";
}

function resetGame() {
  closeModal();
  init();
}

function disableBalls() {
  document.getElementById("draw-button").disabled = true;
  for (let i = 1; i <= totalBalls; i++) {
    const el = document.getElementById("ball-" + i);
    if (el) el.style.pointerEvents = "none";
  }
}

function enableBalls() {
  document.getElementById("draw-button").disabled = false;
  for (let i = 1; i <= totalBalls; i++) {
    const el = document.getElementById("ball-" + i);
    if (el) el.style.pointerEvents = "auto";
  }
}
</script>
</body>
</html>
